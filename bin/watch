<?php

require __DIR__ . '/../vendor/autoload.php';

use PHPScript\Compiler;
use PHPScript\Core\CompileMode;
use PHPScript\Core\CompilerContext;
use PHPScript\Runtime\RuntimeClass;

$targetDir = __DIR__ . '/src';
$extension = RuntimeClass::DEFAULT_FILE_EXTENSION;
$filesHash = [];

if ($argc > 3) {
    $sourceDir = rtrim($argv[1], '/');
    $distDir = rtrim($argv[2], '/');
}


$context = new CompilerContext(CompileMode::WATCH, targetWatch: $targetDir);

$compiler = new Compiler($context);
$compiler->compile($sourceDir, $distDir);
